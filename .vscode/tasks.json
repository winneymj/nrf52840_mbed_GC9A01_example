{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    "version": "2.0.0",
    "type": "shell",
    "problemMatcher": {
        "owner": "cpp",
        "fileLocation": ["relative", "${workspaceFolder}"],
        "pattern": {
            "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",
            "file": 1,
            "line": 2,
            "column": 3,
            "severity": 4,
            "message": 5
        }
    },
    "presentation": {
        "echo": true,
        "reveal": "always",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false
    },
    "tasks": [
        {
            "label": "compile release",
            "group": "build",
            "command": "mbed",
            "args": [
                "compile",
                "--profile=release",
                "-v",
                "-t",
                "GCC_ARM",
                "-m",
                "NRF52840_FEATHER"
            ]
        },
        {
            "label": "uf2conv bin to DFU pkg",
            "group": "build",
            "command": "python",
            "args": [
                "${workspaceFolder}\\uf2\\utils\\uf2conv.py",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\${workspaceFolderBasename}_update.bin",
                "-o",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\flash.uf2",
                "-c",
                "-b",
                "0x26000",
                "-f",
                "0xADA52840"
            ],
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
        },
        {
            "label": "adafruit-nrfutil hex to DFU zip pkg",
            "group": "build",
            "command": "adafruit-nrfutil",
            "args": [
                "dfu",
                "genpkg",
                "--dev-type",
                "0x0052",
                "--sd-req",
                "0x009D",
                "--application",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\${workspaceFolderBasename}.hex",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\${workspaceFolderBasename}.hex.zip"
            ],
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
        },
        {
            "label": "ada-nrfutil app hex to DFU zip",
            "group": "build",
            "command": "adafruit-nrfutil",
            "args": [
                "dfu",
                "genpkg",
                "--dev-type",
                "0x0052",
                "--sd-req",
                "0x00B6",
                "--application",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\${workspaceFolderBasename}_application.hex",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\${workspaceFolderBasename}_application.hex.zip"
            ],
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
        },
        {
            "label": "uf2conv hex to DFU pkg",
            "group": "build",
            "command": "python",
            "args": [
                "${workspaceFolder}\\uf2\\utils\\uf2conv.py",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\${workspaceFolderBasename}_application.hex",
                "-o",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\flash.uf2",
                "-c",
                "-f",
                "0xADA52840"
            ],
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
        },
        {
            "label": "flash DFU pkg",
            "group": "build",
            "command": "adafruit-nrfutil",
            "args": [
                "--verbose",
                "dfu",
                "serial",
                "-pkg",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\flash.uf2",
                "-p",
                "COM7",
                "-b",
                "115200",
                "--singlebank"
            ]
        },
        {
            "label": "nrfutil flash DFU pkg",
            "group": "build",
            "command": "adafruit-nrfutil",
            "args": [
                "--verbose",
                "dfu",
                "serial",
                "-pkg",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\${workspaceFolderBasename}_application.hex.zip",
                "-p",
                "COM7",
                "-b",
                "115200",
                "--singlebank"
            ]
        },
        {
            "label": "flash zip pkg",
            "group": "build",
            "command": "adafruit-nrfutil",
            "args": [
                "--verbose",
                "dfu",
                "serial",
                "-pkg",
                "${workspaceFolder}\\BUILD\\NRF52840_FEATHER\\GCC_ARM-RELEASE\\${workspaceFolderBasename}.hex.zip",
                "-p",
                "COM7",
                "-b",
                "115200",
                "--singlebank"
            ]
        },
        {
            "label": "Build Release",
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "dependsOrder": "sequence",
            "dependsOn": ["compile release", "ada-nrfutil app hex to DFU zip", "nrfutil flash DFU pkg"]
        },
        {
            "label": "compile debug",
            "group": "build",
            "command": "mbed",
            "args": [
                "compile",
                "--profile=debug",
                "-t",
                "GCC_ARM",
                "-m",
                "NRF52840_FEATHER",
                "--flash"
            ]
        },
        {
            "label": "compile develop",
            "group": "build",
            "command": "mbed",
            "args": [
                "compile",
                "--profile=develop",
                "-t",
                "GCC_ARM",
                "-m",
                "NRF52840_FEATHER",
                "--flash"
            ]
        }
    ]
}

// {
//     // See https://go.microsoft.com/fwlink/?LinkId=733558
//     // for the documentation about the tasks.json format
//     "version": "2.0.0",
//     "name": "mbed",
//     "type": "shell",
//     "presentation": {
//         "reveal": "always",
//         "panel": "new"
//     },
//     "problemMatcher": {
//         "owner": "cpp",
//         "fileLocation": ["absolute"],
//         "pattern": {
//             "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",
//             "file": 1,
//             "line": 2,
//             "column": 3,
//             "severity": 4,
//             "message": 5
//         }
//     },
//     "args": ["compile", "--profile=debug", "-t", "GCC_ARM", "-m", "NRF52840_FEATHER"],
//     "windows": {
//         "command": "mbed.exe"
//     }
// }

// {
//     "version": "2.0.0",
//     "tasks": [
//         {
//             "label": "mbed",
//             "type": "shell",
//             "command": "mbed.exe",
//             // use options.cwd property if the Makefile is not in the project root ${workspaceRoot} dir
//             "options": {
//                 "cwd": "${workspaceRoot}"
//             },
//             // start the build without prompting for task selection, use "group": "build" otherwise
//             "group": {
//                 "kind": "build",
//                 "isDefault": true
//             },
//             "presentation": {
//                 "echo": true,
//                 "reveal": "always",
//                 "focus": false,
//                 "panel": "shared"
//             },
//             // arg passing example: in this case is executed make QUIET=0
//             "args": ["compile", "--profile=debug", "-t", "GCC_ARM", "-m", "NRF52840_FEATHER"],
//             // Use the standard less compilation problem matcher.
//             "problemMatcher": {
//                 "owner": "cpp",
//                 "fileLocation": ["absolute"],
//                 "pattern": {
//                     "regexp": "^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$",
//                     "file": 1,
//                     "line": 2,
//                     "column": 3,
//                     "severity": 4,
//                     "message": 5
//                 }
//             }
//         }
//     ]
// }